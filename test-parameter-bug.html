<!DOCTYPE html>
<html>
<head>
<title>Parameter Bug Test</title>
<script type="module">
import { OptimizedIsohedralTiling } from './lib/core/OptimizedIsohedralTiling.js';

console.log('ðŸ§ª Testing IH04 parameter bug...');

const tiling = new OptimizedIsohedralTiling(4); // IH04
console.log('Created tiling IH04');

// Test 1: Get initial parameters
const params1 = tiling.getParameters();
console.log('Initial params:', params1.length, params1);

// Test 2: Set same parameters back (should work)
console.log('Setting same parameters back...');
tiling.setParameters(params1);
const params2 = tiling.getParameters();
console.log('After set same:', params2.length, params2);

// Test 3: Modify first parameter
console.log('Modifying first parameter...');
const modifiedParams = [...params1];
modifiedParams[0] = 0.8;
tiling.setParameters(modifiedParams);
const params3 = tiling.getParameters();
console.log('After modify:', params3.length, params3);

// Test 4: Another modification
console.log('Second modification...');
const modifiedParams2 = [...params3];
modifiedParams2[1] = 0.3;
tiling.setParameters(modifiedParams2);
const params4 = tiling.getParameters();
console.log('After second modify:', params4.length, params4);

// Check internal state
const fallback = tiling._getFallbackTiling();
console.log('Internal parameters:', fallback.parameters ? fallback.parameters.length : 'undefined');
console.log('Internal array:', fallback.parameters);

if (params1.length !== params4.length) {
    console.error('ðŸš¨ BUG CONFIRMED: Parameter count changed!');
} else {
    console.log('âœ… Parameters stable');
}
</script>
</head>
<body>
<h1>Check Console for Parameter Bug Test Results</h1>
</body>
</html>
